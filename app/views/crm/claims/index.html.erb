<div class="page-content page-thin">
	<div class='title-div'>
		<div>
		<h3 class='claim-title'>Danh sách yêu cầu đã gửi</h3>
		</div>
		<div style='margin-left: auto'>
			<a href='/crm/claim/new' class='btn btn-primary font-bold text-uppercase'>Tạo yêu cầu mới</a>
		</div>
	</div>
	<div class="panel claim-list">
		<div class="table-responsive">
			<table class='table'>
				<thead>
					<tr class='claim_header'>
						<th>Tiêu đề</th>
						<th>Ngày tạo</th>
						<th>Trạng thái</th>
					</tr>
				</thead>
				<tbody>
					<% @claims.each do |claim| %>
						<tr class='show_claim_detail' data-toggle="modal" data-id="<%= claim.id %>" data-target="#modal_claim_detail">
							<td><%= claim.name %></td>
							<td><%= claim.create_date %></td>
							<td><%= @stage[claim.stage_id] %></td>
						</tr>
					<% end %>
				</tbody>
			</table>
		</div>
	</div>
</div>
<div class="modal" tabindex="-1" role="dialog" id="modal_claim_detail">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title claim_name">Chi tiết yêu cầu</h5>
        <button type="button" class="close close-modal" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body" id='claim-detail'>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>
<style>
.title-div{
	margin-top: 30px;
	display: flex;
	justify-content: center;
	align-items: center;
	flex-direction: row;
}
.close-modal {
  position: absolute;
  right: 15px;
  top: 15px;
  font-size: 25px;
}
.claim-list {
	margin-top: 50px;
}

.show_claim_detail td{
	padding: 15px !important;
}
.claim-title {
	font-size: 18px !important;
	font-weight: 700;
}
.claim_header th{
	padding: 15px !important;
}
</style>
<script>
	$('.show_claim_detail').on('click', function(){
			id = $(this).data('id')
			$.ajax({
					method: 'GET',
					url: `/crm/claims/${ id }`,
					dataType: 'script'
				})
	})
</script>
