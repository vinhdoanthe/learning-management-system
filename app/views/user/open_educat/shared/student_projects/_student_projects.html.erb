  <%= javascript_include_tag 'social_community/sc_student_projects/sc_student_project.js' %>
<% no_project = true %>
<% subject_student_projects.each{|k, v| no_project = false if v.present? } %>
<% if no_project && current_user.is_student? %>
<div class='panel'>
  <div class='panel-content'>
    <div>
      <p style='text-align: center'> <span style='color: black'>Chưa có sản phẩm cuối khoá!</span></p>
      <!-- <a href='/' style='text-decoration: underline; font-size: 15px; font-weight: 600'>Quay lại trang chủ</a>-->
    </div>
  </div>
</div>
<% else %>
<% subjects.each do |id, level| %>
  <div class="panel-content">
    <div class="box-product" >
      <% projects = subject_student_projects[id] %>
      <% if projects.blank? %>
        <% if current_user.is_teacher? %>
          <div class="fc-header" style='margin: 0 0 15px 0'>
            <h3><span class="color-F16357">Level <%= level  %></h3>
          </div>
          <div class='row'>
            <%= render 'user/open_educat/shared/student_projects/upload_item', { id: id } %>
          </div>
        <% end %>
      <% else %>
      <div class="fc-header" style='margin: 0 0 15px 0'>
        <h3><span class="color-F16357">Level <%= level  %></h3>
      </div>
        <% total_row = projects.length / 3 %>
        <% for i in 0..total_row %>
          <div class='row projects_row row_<%= i %>'>
            <% projects.each_with_index do |project, index| %>
              <% if index / 3 == i %>
                <div class='col-md-4'>
                  <%= render 'user/open_educat/shared/student_projects/student_project_item', { project: project } %>
                </div>
              <% end %>
              <% if current_user.is_teacher? %>
                <% if i == (projects.length / 4) && index == (projects.length - 1) %>
                  <%= render 'user/open_educat/shared/student_projects/upload_item', { id: id } %>
                <% end %>
              <% end %>
            <% end %>
          </div>
        <% end %>
      <% end %>
    </div>
  </div>    
<% end %>
<% end %>
<div id="studentProjectDetail" class="modal fade" role="dialog">
</div>
<div id="editStudentProjectDetail" class="modal fade" role="dialog">
</div>
<%= form_with model: @student_project do |form| %>
  <div class="field">
    <%= form.label :content %>
    <%= form.rich_text_area :content %>
  </div>
<% end %>
<%= render 'user/open_educat/shared/student_projects/modals/student_project_upload', { subjects: subjects } %>
<style>
#video_infomation input{
  width: 100%;
  margin-bottom: 15px;
}
  #video_infomation textarea{
    width: 100%;
  }
  #video_infomation select{
    padding: 5px;
    margin-bottom: 15px;
    -webkit-appearance: auto;
  }
  .projects_row {
    display: flex;
      flex-wrap: wrap
  }
</style>
<script>
</script>
