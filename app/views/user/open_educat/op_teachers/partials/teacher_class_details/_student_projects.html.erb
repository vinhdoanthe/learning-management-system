<%= javascript_include_tag 'social_community/sc_student_projects/sc_student_project.js' %>
<div>
  <table id="table_student_projects">
    <colgroup>
      <col>
      <col>
      <col>
      <col>
      <col width="200px">
    </colgroup>
    <thead>
      <tr>
        <th>Mã học sinh</th>
        <th>Họ và tên</th>
        <th style="text-align: center">Level</th>
        <th style="text-align: center">Bài cuối khoá</th>
        <th style="text-align: center">Action</th>
      </tr>
    </thead>
    <tbody>
      <% student_projects.each do |project| %>
        <tr>
          <td>[<%= students[project.student_id][:code] %>]</td>
          <td class='project_student_name'>
            <span class="student_avatar">
              <% user = User::Account::User.where(student_id: project.student_id).first %>
              <%= User::Account::UserDecorator.new(user).display_avatar.html_safe %>
            </span>
            <span>
              <%= students[project.student_id][:full_name] %>
            </span>
          </td>
          <td style="text-align: center"><%= subjects[project.subject_id] %></td>
          <td style="text-align: center">
            <span class='student_project_icon <%= 'active_icon' if project.presentation.attached? %>'>
              <%= image_tag('global/images/microsoft-powerpoint.png', style: 'width: 32px') %>
            </span>
            <span class='student_project_icon <%= 'active_icon' if project.introduction_video.present? %>'>
              <%= image_tag('global/images/button-youtube.png', style: 'width: 32px') %>
            </span>
            <span class='student_project_icon <%= 'active_icon' if project.project_show_video.present? %>'>
              <%= image_tag('global/images/browser.png', style: 'width: 32px') %>
            </span>
          </td>
          <td class="table_student_project_action" style="text-align: center">
            <span class="show_project student_project_show"  data-project="<%= project.id %>" data-toggle="modal" data-target="#studentProjectDetail"><i class="fa fa-eye"></i></span>
            <% if project.created_by == current_user.id %>
              <span class="edit_project" data-project="<%= project.id %>" data-toggle="modal" data-target="#editStudentProjectDetail"><i class="fa fa-edit"></i></span>
              <span class="delete_student_project" data-project="<%= project.id %>"><i class="fa fa-trash"></i></span>
            <% else %>
              <span class="not_allow"><i class="fa fa-edit"></i></span>
              <span class="not_allow"><i class="fa fa-trash"></i></span>
            <% end %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
  <div class="add_new_project">
    <button class='btn btn-primary upload_project' type="button" data-toggle="modal" data-target='#upload_student_project_modal'>Thêm mới </button>
  </div>
</div>
<div id="studentProjectDetail" class="modal fade" role="dialog" aria-labelledby="...">
</div>
<div id="editStudentProjectDetail" class="modal fade" role="dialog" aria-labelledby="...">
</div>
<div id="upload_student_project_modal" class="modal" role="dialog" aria-labelledby="uploadStudentProjectTitle">
</div>
<style>
  .student_project_icon {
    opacity: 0.3;
    padding-right: 10px;
  }
  .active_icon {
    opacity: 1
  }
  #table_student_projects {
    width: 100%;
  }
  .table_student_project_action span{
    font-size: 20px;
    color: #5DC2A7;
    cursor: pointer;
  }
  table#table_student_projects th {
    border-bottom: 3px solid #D7DFE9;
    padding-bottom: 10px;
    text-transform: uppercase;
    font-weight: 700;
  }
  table#table_student_projects td {
    padding: 10px;
    border-bottom:1px solid #D7DFE9;
  }
  .project_student_name {
    color: #0654BA;
    display: flex;
    align-items: center;
  }
  .student_avatar {
    display: inline-block;
    border-radius: 50%;
    overflow: hidden;
    margin-right: 10px;
  }
  .student_avatar img {
    width: 40px;
    height: 40px;
  }
  .add_new_project {
    margin-top: 30px;
    display: flex;
  }
  .add_new_project button{
    text-transform: uppercase;
    font-weight: 700;
    margin-left: auto;
  }
</style>
