<table class='table table-condensed table-hover'>
  <thead>
    <tr>
      <th>#</th>
      <th><%= t('Contest.Topic.Topic name') %></th>
      <th><%= t('Contest.Topic.Thumbnail') %></th>
      <th><%= t('Contest.Topic.Description') %></th>
      <th><%= t('Contest.Topic.Date time') %></th>
      <th><%= t('Contest.Topic.Region') %></th>
      <th><%= t('Contest.Content.Action') %></th>
    </tr>
  </thead>
  <tbody class='table-contest-topic'>
    <% contest_topics.each do |topic| %>
      <tr>
        <td><%= topic.id %></td>
        <td><%= topic.name %></td>
        <td><%= image_tag topic.thumbnail, style: 'width: 50px; height: 50px'  if topic.thumbnail.present?%></td>
        <td><%= topic.description&.html_safe %></td>
        <td><%= topic.start_time.strftime("%d/%m/%Y") %> - <%= topic.end_time.strftime("%d/%m/%Y") %></td>
        <td><%= topic.region %></td>
        <td style="min-width: 100px">
            <a href="/adm/contest/contest_topics/<%= topic[:id] %>" target="_blank"><i class="far fa-eye"></i></a>
          <span>
            <a class="delete_contest_topic" data-topic="<%= topic.id %>"><i class="fas fa-trash"></i></a>
          </span>
        </td>
      </tr>
    <% end %>
  </tbody>
  <thead>
    <tr>
      <th>#</th>
      <th><%= t('Contest.Topic.Name') %></th>
      <th><%= t('Contest.Topic.Thumbnail') %></th>
      <th><%= t('Contest.Topic.Description') %></th>
      <th><%= t('Contest.Topic.Date time') %></th>
      <th><%= t('Contest.Topic.Region') %></th>
      <th><%= t('Contest.Content.Action') %></th>
    </tr>
  </thead>
</table>

  <script>
    $(document).ready(function(){
      $('.table-contest-topic').on('click', '.delete_contest_topic', function(){
        button = $(this)
        id = $(this).data('topic');
        if (confirm("Ban chac chan muon xoa chu de?")){
          $.ajax({
            method: 'POST',
            url: '/adm/contest/contest_topics/delete_topic',
            data: { topic_id: id },
            success: function(res){
              display_response_noti(res);
              if (res.type == 'success'){
              button.closest('tr').hide();
              }
            }
          })
        }
      })
    })
  </script>
